<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/683b4b40e3.js" crossorigin="anonymous">
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&display=swap" rel="stylesheet">

    <title>Document</title>
    <link rel="stylesheet" href="styles\main.css">
    <link rel="stylesheet" href="styles/footer.css">
    <style>


    </style>
</head>

<body>

    <div id="body"></div>
    <div id="footer"></div>
</body>

</html>

<script type="module">
    import navbarsidebar from "./scripts/navbar_sidebar.js";
    var body = document.querySelector("#body");
    body.innerHTML = navbarsidebar()

    import profile from "./scripts/login_profile.js";

    var verticalbox2 = document.getElementById("verticalbox2");
    verticalbox2.innerHTML = profile()

    let n;
    var mobnum = JSON.parse(localStorage.getItem("mobileNumber"))

    n = document.querySelector("#mobnum").textContent = mobnum;
    document.querySelector("#mob").textContent = mobnum;
    document.querySelector("#pp3").textContent = mobnum;

    checkDone();


    function checkDone() {

        let details = localStorage.getItem("givedetails")


        if (details === "true") {
            let loginstat = localStorage.getItem("login");
            if (loginstat === "true") {

                let data = JSON.parse(localStorage.getItem("user_details"));
                let { f, l, e } = data;
                document.querySelector(".firstname").placeholder = f;
                document.querySelector(".lastname").placeholder = l;
                document.querySelector(".email").placeholder = e;

            }
        }

        else {
            document.querySelector(".firstname").placeholder = "First Name*";
            document.querySelector(".lastname").placeholder = "Last Name*";
            document.querySelector(".email").placeholder = "Email*";
        }
    }


    document.querySelector("#save").addEventListener("click", () => {


        let f = document.querySelector(".firstname").value;
        let l = document.querySelector(".lastname").value;
        let e = document.querySelector(".email").value;

        if (f == "" || l == "" || e == "") {
            alert("Please Fill All the details");
            return false
        }

        let obj = {
            f: document.querySelector(".firstname").value,
            l: document.querySelector(".lastname").value,
            e: document.querySelector(".email").value
        }

        localStorage.setItem("user_details", JSON.stringify(obj));
        localStorage.setItem("givedetails", true);


        let loginstat = localStorage.getItem("login");
        if (loginstat === "true") {

            let data = JSON.parse(localStorage.getItem("user_details"));
            let { f, l, e } = data;
            document.querySelector(".firstname").placeholder = f;
            document.querySelector(".lastname").placeholder = l;
            document.querySelector(".email").placeholder = e;

        }





    })


    document.querySelector("#reset").addEventListener("click", () => {

        document.querySelector(".firstname").placeholder = "First Name*";
        document.querySelector(".lastname").placeholder = "Last Name*";
        document.querySelector(".email").placeholder = "Email*";
        window.localStorage.removeItem('user_details');
        localStorage.setItem("givedetails", false);

    })

    // footer

    let foot = document.getElementById("footer");
    import footer from "./components/footer.js";
    foot.innerHTML = footer();

    document.querySelector("#menu").style.visibility = "hidden";
    document.querySelector("#mainm").addEventListener("click", first);

    function first() {
        document.querySelector("#menu").style.visibility = "visible";
        console.log("Test")
        this.removeEventListener("click", first);
        document.querySelector("#mainm").addEventListener("click", () => {
            document.querySelector("#menu").style.visibility = "hidden";
            document.querySelector("#mainm").addEventListener("click", first);
        })
    }
    document.querySelector("#logoutBtn").addEventListener("click", () => {
        localStorage.setItem("login", false);
        window.localStorage.removeItem('user_details');
        localStorage.setItem("givedetails", false);
        window.location.href = "venues.html";
    })


</script>